#!/bin/bash
# vim: set syntax=bash

set -euo pipefail

usage() {
    echo "$(basename $0) <JWT>"
    echo
    echo "Decode a JSON Web Token."
}

if (( $# < 1 ));
then
    usage
    exit 1
fi

case "$1" in
-h|--help)
    usage
    ;;
*)
    echo "$1" | jq -R 'gsub("-";"+") | gsub("_";"/") | split(".") | .[1] | @base64d | fromjson'
    ;;
esac
