# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod3

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:FiraCode 11

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

default_orientation auto

# define monitors for the workspaces: the first x go to the big screen, the others to the small screen
# eDP1: internal
# HDMI2: usually at home
workspace 1 output 'HDMI-2' 'eDP-1'
workspace 2 output 'HDMI-2' 'eDP-1'
workspace 3 output 'HDMI-2' 'eDP-1'
workspace 4 output 'HDMI-2' 'eDP-1'
workspace 5 output 'HDMI-2' 'eDP-1'
workspace 6 output 'HDMI-2' 'eDP-1'
workspace z output 'eDP-1'
workspace x output 'eDP-1'
workspace c output 'eDP-1'
workspace v output 'eDP-1'
workspace b output 'eDP-1'

mode "window" {
    # change focus
    bindsym j focus down; mode "default"
    bindsym k focus up; mode "default"
    bindsym h focus left; mode "default"
    bindsym l focus right; mode "default"

    bindsym u focus parent; mode "default"
    bindsym i focus child; mode "default"

    # enter fullscreen mode for the focused container
    bindsym f fullscreen toggle; mode "default"

    # move focused window
    bindsym Shift+j move down; mode "default"
    bindsym Shift+k move up; mode "default"
    bindsym Shift+h move left; mode "default"
    bindsym Shift+l move right; mode "default"

    # move to workspace
    bindsym n workspace next; mode "default"
    bindsym p workspace prev; mode "default"

    # move container to workspace and follow
    bindsym Shift+n move container to workspace next; workspace next; mode "default"
    bindsym Shift+p move container to workspace prev; workspace prev; mode "default"

    # move focused container to workspace and switch to it
    bindsym Shift+1 move container to workspace 1; workspace 1; mode "default"
    bindsym Shift+2 move container to workspace 2; workspace 2; mode "default"
    bindsym Shift+3 move container to workspace 3; workspace 3; mode "default"
    bindsym Shift+4 move container to workspace 4; workspace 4; mode "default"
    bindsym Shift+5 move container to workspace 5; workspace 5; mode "default"
    bindsym Shift+6 move container to workspace 6; workspace 6; mode "default"
    bindsym Shift+z move container to workspace z; workspace z; mode "default"
    bindsym Shift+x move container to workspace x; workspace x; mode "default"
    bindsym Shift+c move container to workspace c; workspace c; mode "default"
    bindsym Shift+v move container to workspace v; workspace v; mode "default"
    bindsym Shift+b move container to workspace b; workspace b; mode "default"

    bindsym a move workspace to output left; mode "default"
    bindsym d move workspace to output right; mode "default"

    # leave mode
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

mode "resize" {
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt
    bindsym h resize shrink width 10 px or 10 ppt

    # move focused window
    bindsym Shift+j move down 30 px
    bindsym Shift+k move up 30 px
    bindsym Shift+h move left 30 px
    bindsym Shift+l move right 30 px

    # leave mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "layout" {
    bindsym t layout tabbed; mode "default"
    bindsym s layout toggle split; mode "default"

    bindsym Shift+s split toggle; mode "default"

    # leave mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "keyboard" {
    bindsym e exec --no-startup-id "xmodmap ~/.Xmodmap_en"; mode "default"
    bindsym d exec --no-startup-id "xmodmap ~/.Xmodmap_de"; mode "default"

    # leave mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "i3" {
    # reload the configuration file
    bindsym c reload; mode "default"

    # restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
    bindsym r restart; mode "default"

    # leave mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "system" {
    # lock screen
    bindsym l exec --no-startup-id "i3lock -c 000000"; mode "default"

    # exit i3
    bindsym e exec --no-startup-id "i3-msg exit"; mode "default"

    # reboot
    bindsym r exec --no-startup-id "systemctl reboot"; mode "default"

    # sleep
    bindsym s exec --no-startup-id "i3lock -c 000000 && systemctl suspend"; mode "default"

    # shutdown
    bindsym Shift+s exec --no-startup-id "systemctl poweroff"; mode "default"

    # leave mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# mode to move the mouse
# currently disabled, but we might want it at some point
mode "mouse" {
    # normal
    bindsym k exec xdotool mousemove_relative -- 0 -30
    bindsym j exec xdotool mousemove_relative -- 0 30
    bindsym l exec xdotool mousemove_relative -- 30 0
    bindsym h exec xdotool mousemove_relative -- -30 0
    # faster(x2)
    bindsym Shift+k exec xdotool mousemove_relative -- 0 -60
    bindsym Shift+j exec xdotool mousemove_relative -- 0 60
    bindsym Shift+l exec xdotool mousemove_relative -- 60 0
    bindsym Shift+h exec xdotool mousemove_relative -- -60 0
    # top/bottom
    bindsym g exec xdotool mousemove_relative -- 0 -9999
    bindsym Shift+g exec xdotool mousemove_relative -- 0 9999
    # click
    bindsym Return exec xdotool click 1  # left click
    bindsym Shift+Return exec xdotool click 2  # middle click
    bindsym Ctrl+Return exec xdotool click 3  # right click
    # exit mode
    bindsym Escape mode "default"
}

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+z workspace z
bindsym $mod+x workspace x
bindsym $mod+c workspace c
bindsym $mod+v workspace v
bindsym $mod+b workspace b

# move workspace to other monitors
bindsym $mod+Shift+u move workspace to output up
bindsym $mod+Shift+d move workspace to output down

# start dmenu (a program launcher)
bindsym $mod+Shift+e exec dmenu_run
#bindsym $mod+e exec --no-startup-id i3-dmenu-desktop
bindsym $mod+e exec --no-startup-id exec rofi -combi-modi "drun#window" -show combi -modi combi

# fix a bug in i3: https://github.com/i3/i3/issues/3528
# simply refocus the launched window
bindsym $mod+t exec alacritty; focus parent; focus child

bindsym $mod+w mode "window"
bindsym $mod+r mode "resize"
bindsym $mod+k mode "keyboard"
bindsym $mod+s mode "system"
bindsym $mod+l mode "layout"
bindsym $mod+i mode "i3"

bindsym XF86AudioRaiseVolume exec --no-startup-id ~/bin/change-audio volume sink +5% && pkill -RTMIN+1 i3blocks
bindsym XF86AudioLowerVolume exec --no-startup-id ~/bin/change-audio volume sink -5% && pkill -RTMIN+1 i3blocks
bindsym Prior exec --no-startup-id pactl set-sink-volume 0 +5% && pkill -RTMIN+1 i3blocks
bindsym Next exec --no-startup-id pactl set-sink-volume 0 -5% && pkill -RTMIN+1 i3blocks
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle && pkill -RTMIN+1 i3blocks
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute 1 toggle && pkill -RTMIN+2 i3blocks

bindsym XF86MonBrightnessUp exec --no-startup-id ~/bin/adjust-brightness increase 100
bindsym XF86MonBrightnessDown exec --no-startup-id ~/bin/adjust-brightness decrease 100

bindsym --release Print exec ~/bin/take-screenshot

bindsym Pause exec --no-startup-id ~/bin/change-audio mute source && pkill -RTMIN+2 i3blocks
bindsym Shift+Pause exec --no-startup-id ~/bin/change-audio unmute source && pkill -RTMIN+2 i3blocks

# kill window
bindsym $mod+q kill

bindsym $mod+m exec --no-startup-id ~/bin/configure-monitors
bindsym $mod+Shift+m exec --no-startup-id ~/bin/configure-monitors --off

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# send caps lock events to i3blocks so we can visualize it
bindsym --release Caps_Lock exec pkill -SIGRTMIN+11 i3blocks

bar {
    status_command i3blocks
}

# special window actions
for_window [id="0x3800062"] floating enable
for_window [id="0x1a00007"] floating enable
for_window [class=".*"] border pixel 3

# class                 border  backgr. text    indicator child_border
client.focused          #4c7899 #285577 #ffffff #2e9ef4   #00ff00
client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
client.unfocused        #333333 #222222 #888888 #292d2e   #222222
client.urgent           #2f343a #900000 #ffffff #900000   #900000
client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c

client.background       #ffffff

